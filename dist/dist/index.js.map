{"version":3,"file":"index.js","sources":["../../src/api/index.js"],"sourcesContent":["// import qs from \"qs\";\n\nexport const getImageUrl = (obj, size = `medium`, BACKEND_URL) => {\n  if (!obj) {\n    return null;\n  }\n\n  const url = obj.formats?.[size]?.url || obj.url;\n\n  return `${BACKEND_URL}${url}`;\n};\n\nexport const transformResponseItem = (resItem) => {\n  if (isArray(resItem)) {\n    return resItem.map((item) => transformResponseItem(item));\n  }\n\n  if (isObject(resItem)) {\n    if (isArray(resItem.data)) {\n      resItem = [...resItem.data];\n    } else if (isObject(resItem.data)) {\n      resItem = transformEntriesInObj(flatItemAttributes(resItem.data));\n    } else if (resItem.data === null) {\n      resItem = null;\n    } else {\n      resItem = transformEntriesInObj(flatItemAttributes(resItem));\n    }\n\n    for (const key in resItem) {\n      resItem[key] = transformResponseItem(resItem[key]);\n    }\n\n    return resItem;\n  }\n\n  return resItem;\n};\n\nexport const transformPageBlock = (block, transformers) => {\n  const key = block?._Component;\n\n  if (!transformers?.[key]) {\n    return null;\n  }\n\n  return transformers[key](block);\n};\n\nexport const isObject = (data) => data && typeof data === `object`;\n\nexport const isArray = (data) => data && Array.isArray(data);\n\nexport const flatItemAttributes = (data) => {\n  if (!data?.attributes) return data;\n\n  return {\n    id: data?.id,\n    ...data.attributes,\n  };\n};\n\nexport const combineHeaders = ({ withAuth }) => {\n  const headers = {};\n\n  if (withAuth) {\n    const token = localStorage.getItem(`jwt`);\n    headers.Authorization = `Bearer ${token}`;\n  }\n\n  return headers;\n};\n\nexport const snakeToCamel = (str) => {\n  return str.replace(/([-_][a-z])/gi, (char) => {\n    return char.toUpperCase().replace(`-`, ``).replace(`_`, ``);\n  });\n};\n\nexport const transformEntriesInObj = (item) => {\n  if (isObject(item) && !isArray(item)) {\n    const entries = Object.entries(item).map((entry) => {\n      const key = snakeToCamel(entry[0]);\n\n      let value = entry[1];\n\n      if (isObject(value)) {\n        value = transformEntriesInObj(value);\n      } else if (isArray(value)) {\n        value = value.map((elem) => transformEntriesInObj({ item: elem }));\n      }\n\n      return [key, value];\n    });\n\n    return Object.fromEntries(entries);\n  }\n\n  return item;\n};\n\nexport const removeEmptyFields = ({ data, passKey, files }) => {\n  // console.log(`ðŸš€ ~ removeEmptyFields ~ files`, files);\n  let modified;\n  if (typeof data === `object` && data !== null) {\n    modified = {};\n    if (Array.isArray(data)) {\n      modified = [];\n      for (const element of data) {\n        modified.push(removeEmptyFields({ data: element, passKey, files }));\n      }\n    } else {\n      for (const key of Object.keys(data)) {\n        if (data[key] === `` && key !== `publishedAt`) {\n          continue;\n        }\n        modified[key] = removeEmptyFields({\n          data: data[key],\n          passKey: `${passKey ? `${passKey}.` : ``}${key}`,\n          files,\n        });\n      }\n    }\n  } else {\n    modified = data;\n  }\n  return modified;\n};\n\nexport const appendFilesToFormData = (formData, files) => {\n  // console.log(`ðŸš€ ~ appendFilesToFormData ~ formData`, formData);\n  if (Object.keys(files).length) {\n    for (const key of Object.keys(files)) {\n      // console.log(`ðŸš€ ~ key`, key);\n      if (Array.isArray(files[key])) {\n        for (const [_, file] of files[key].entries()) {\n          // console.log(`ðŸš€ ~ file`, file, files[key]);\n          formData.append(`files.${key}`, file);\n        }\n      } else {\n        // console.log(`ðŸš€ ~ appendFilesToFormData ~ key`, key);\n        // console.log(`ðŸš€ ~ file`, file, files[key]);\n        formData.append(`files.${key}`, files[key]);\n      }\n    }\n  }\n};\n"],"names":[],"mappings":"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"}